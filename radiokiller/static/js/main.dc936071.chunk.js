(window.webpackJsonpplayer=window.webpackJsonpplayer||[]).push([[0],{19:function(t,e,n){t.exports=n(37)},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(9),i=n.n(o),s=n(10),l=n(6),c=(n(29),n(1)),p=n(2),u=n(4),y=n(3),d=n(5),m=n(38),f=(n(30),n(11));function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}var S=function(t){return{type:"UPDATE_PLAYLIST",list:t.list.map((function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{index:e})}))}},v=function(t){return{type:"UPDATE_USER_INTENT",intent:t.intent}},E=(n(31),n(32),function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).state={show:!1},n}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidUpdate",value:function(t){var e="PLAYING"===this.props.playerStatus;e!==this.state.show&&this.setState({show:e})}},{key:"render",value:function(){return["playListTriangle"].push(this.state.show?"play":"stop"),r.a.createElement(m.a,{in:this.state.show&&this.props.current,timeout:300,className:"playListTriangle"},r.a.createElement("div",null))}}]),e}(r.a.Component)),L=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).checkIfPlaying=function(t){var e=n.props.playerStatus;return n.props.currentStation.id===t&&("PLAYING"===e||"BUFFERING"===e)},n.checkIfSelected=function(t){return n.props.currentStation.id===t},n.playListClick=function(t){return function(){n.player.play(t)(),n.props.updateUserIntent("PLAY")}},n}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.props.getPlayList(),this.player=this.props.getPlayer()}},{key:"componentDidUpdate",value:function(t){!t.currentStation&&this.props.playList.length&&this.player.play()({autoPlay:!0})}},{key:"render",value:function(){var t=this;return this.props.playListLoader?r.a.createElement("div",{className:"playList hideScroll"},r.a.createElement("div",{className:"list placeholder selected active"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"}),r.a.createElement("div",{className:"list placeholder selected"})):r.a.createElement("div",{className:"playList hideScroll"},this.props.playList.map((function(e){var n=["list"];return t.checkIfSelected(e.id)&&n.push("selected"),r.a.createElement("div",{className:n.join(" "),key:e.id,onClick:t.playListClick(e)},r.a.createElement(E,{playerStatus:t.props.playerStatus,current:t.checkIfSelected(e.id),selected:t.checkIfSelected(e.id)}),e.title," ",r.a.createElement("div",{className:"lang"},e.genre.slice(0,3)))})))}}]),e}(r.a.PureComponent),I=Object(l.b)((function(t){return{playList:t.playList,playListLoader:t.playListLoader,currentStation:t.currentStation,playerStatus:t.playerStatus}}),(function(t){return{getPlayList:function(){fetch("playlist.json").then((function(t){return t.json()})).then((function(e){t(S({list:e.music}))})).catch((function(t){console.error("api failed",t)}))},updateUserIntent:function(e){return t(v({intent:e}))}}}))(L),g=0,O=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(r)))).updateIndicator=function(){"PLAYING"!==n.props.playerStatus&&"PLAY"===n.props.userIntent&&window.navigator.onLine&&setTimeout((function(){return n.play()({retry:!0})}),1e3),n.props.updateIndicator()},n.onStatus=function(t){return function(e){"PLAYING"===t&&e&&e.timeStamp&&(g=e.timeStamp,localStorage.setItem("currentStationId",n.props.currentStation.id)),n.props.onStatus(t)(e)}},n.play=function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{retry:!1,autoPlay:!1};e.retry&&n.onStatus("WAITING")(),n.onStatus("PAUSE")();var a=n.refs.player;if(e.autoPlay&&localStorage.getItem("currentStationId")){var r=localStorage.getItem("currentStationId"),o=n.props.playList.filter((function(t){return t.id===r}));o.length&&(t=o[0])}t=t||n.props.currentStation,a.src=t.source,a.onloadedmetadata=n.onMeta,a.onaudioprocess=n.audioProcess,a.onplay=n.onStatus("PLAY"),a.onplaying=n.onStatus("PLAYING"),a.onpause=n.onStatus("PAUSE"),a.onwaiting=n.onStatus("WAITING"),a.onstalled=n.onStatus("STALLED"),a.onerror=n.onStatus("ERROR"),a.ontimeupdate=n.props.onTimeUpdate;try{a.play().catch(n.onError)}catch(i){console.error("player",i),n.onError(i)}n.props.setStation({station:t})}},n.onError=function(t){n.onStatus("ERROR")()},n.pause=function(){n.refs.player.pause()},n}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.player=this.refs.player,window.addEventListener("online",this.updateIndicator),window.addEventListener("offline",this.props.updateIndicator)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.props.updateIndicator),window.removeEventListener("offline",this.props.updateIndicator)}},{key:"render",value:function(){return r.a.createElement("audio",{ref:"player"})}}]),e}(r.a.PureComponent),b=Object(l.b)((function(t){return{playerStatus:t.playerStatus,playerTime:t.playerTime,currentStation:t.currentStation,playList:t.playList,userIntent:t.userIntent}}),(function(t){return{setStation:function(e){t({type:"SET_STATION",station:e.station})},onStatus:function(e){return function(n){t({type:"UPDATE_PLAYER_STATUS",status:{status:e}.status})}},onTimeUpdate:function(e){var n=e.timeStamp;t(function(t){return{type:"UPDATE_PLAYER_TIME",timeStamp:t.timeStamp}}({timeStamp:n-g}))},updateIndicator:function(){t({type:"UPDATE_ONLINE_STATUS",status:{status:navigator.onLine}.status})}}}),null,{forwardRef:!0})(O),P=(n(33),n(34),n(35),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=this.props.currentStation||{},e=t.image,n=t.title;return r.a.createElement("div",{className:"playerMeta"},r.a.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(e,")")}}),r.a.createElement("div",{className:"stationName"},n))}}]),e}(r.a.PureComponent)),N=(n(36),function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(y.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.now=Date.now()}},{key:"render",value:function(){if("PLAYING"!==this.props.playerStatus)return null;var t=parseInt(this.props.playerTime/1e3),e="0".concat(t%60);e=e.slice(-2);var n="0".concat(parseInt(t/60));n=n.slice(-2);var a=" ".concat(n,":").concat(e);return r.a.createElement("div",{className:"PlayerTimer"},a)}}]),e}(r.a.PureComponent)),j=function(t){function e(){var t,n,a=this;Object(c.a)(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(i)))).action=function(){"PLAYING"===n.props.playerStatus||"WAITING"===n.props.playerStatus?(n.player.pause(),n.props.updateUserIntent("PAUSE")):(n.player.play()(),n.props.updateUserIntent("PLAY"))},n.playerIcon=function(){return"PLAYING"===n.props.playerStatus?r.a.createElement("div",{className:"playStopControls stop"}):"PAUSE"===n.props.playerStatus?r.a.createElement("div",{className:"playStopControls play"}):"STALLED"===n.props.playerStatus||"ERROR"===n.props.playerStatus?r.a.createElement("div",{className:"playStopControls stalled"}):r.a.createElement("div",{className:"playStopControls buffer"})},n.changeTrack=function(t){return function(){var e=n.props.playList[0];e="NEXT"===t?n.props.currentStationIndex===n.props.playList.length-1?n.props.playList[0]:n.props.playList[n.props.currentStationIndex+1]:0===n.props.currentStationIndex?n.props.playList[n.props.playList.length-1]:n.props.playList[n.props.currentStationIndex-1],n.props.updateUserIntent("PLAY"),n.player.play(e)()}},n.prevNextIcon=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"triangle"}),r.a.createElement("div",{className:"bar"}))},n.prev=function(){return"INITIALISING"===n.props.playerStatus?null:r.a.createElement("div",{className:"actions prev prevNextControl",onClick:n.changeTrack("PREV")},r.a.createElement(a.prevNextIcon,null))},n.next=function(){return"INITIALISING"===n.props.playerStatus?null:r.a.createElement("div",{className:"actions next prevNextControl",onClick:n.changeTrack("NEXT")},r.a.createElement(a.prevNextIcon,null))},n}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.player=this.props.getPlayer()}},{key:"render",value:function(){var t=["innerWrapper"];!this.props.playListLoader&&t.push("anim");var e=["playerControls"];return!this.props.playListLoader&&e.push("controlAnim"),r.a.createElement("div",{className:e.join(" ")},r.a.createElement("div",{className:t.join(" ")},!this.props.playListLoader&&r.a.createElement(P,{currentStation:this.props.currentStation}),!this.props.playListLoader&&r.a.createElement(this.prev,null),r.a.createElement("div",{className:"actions",onClick:this.action},r.a.createElement(this.playerIcon,null)),!this.props.playListLoader&&r.a.createElement(this.next,null),r.a.createElement(N,{playerTime:this.props.playerTime,playerStatus:this.props.playerStatus})))}}]),e}(r.a.PureComponent),T=Object(l.b)((function(t){var e=t.playerStatus,n=t.playList,a=t.currentStation,r=t.playListLoader,o=t.playerTime,i=t.onlineStatus,s=t.userIntent;return{playerStatus:e,playList:n,currentStationIndex:a?a.index:0,currentStation:a,playListLoader:r,playerTime:o,onlineStatus:i,userIntent:s}}),(function(t){return{updateUserIntent:function(e){return t(v({intent:e}))}}}))(j),A=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(o)))).state={show:!1},n.player=r.a.createRef(),n.play=function(t){n.player.current.play(t)()},n.getPlayer=function(){return n.player.current},n.offlineMessage=function(){return n.props.onlineStatus?null:r.a.createElement("div",{className:"offlineMessage"},"YOU ARE OFFLINE, MUSIC WILL RESUME WHEN YOU ARE ONLINE")},n}return Object(d.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.props.onlineStatus?"":"offline"},r.a.createElement("h1",{className:"colored"},"RADIO KILLER"),r.a.createElement(m.a,{in:this.state.show,timeout:300,classNames:"rkAnim"},r.a.createElement("div",{className:"rkContainer"},r.a.createElement(b,{ref:this.player}),r.a.createElement(I,{play:this.play,getPlayer:this.getPlayer}),r.a.createElement(T,{getPlayer:this.getPlayer})))),r.a.createElement("div",{className:"playLink"},r.a.createElement("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=com.vilvan.android.radiokiller&utm_source=radiokillerpage&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"},r.a.createElement("img",{alt:"Get it on Google Play",height:"60",src:"https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"}))),r.a.createElement(this.offlineMessage,null))}}]),e}(r.a.PureComponent),w=Object(l.b)((function(t){return{onlineStatus:t.onlineStatus}}))(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(n,!0).forEach((function(e){Object(f.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={playerStatus:"INITIALISING",playListLoader:!0,playList:[],currentStation:null,onlineStatus:navigator.onLine,userIntent:"PLAY"},_=Object(s.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_PLAYER_STATUS":return U({},t,{playerStatus:e.status});case"UPDATE_PLAYLIST":return U({},t,{playList:e.list,playListLoader:!1,currentStation:e.list[0]});case"UPDATE_PLAYER_TIME":return U({},t,{playerTime:e.timeStamp});case"SET_STATION":return U({},t,{currentStation:e.station});case"UPDATE_ONLINE_STATUS":return U({},t,{onlineStatus:e.status});case"UPDATE_USER_INTENT":return U({},t,{userIntent:e.intent});default:return t}}));i.a.render(r.a.createElement(l.a,{store:_},r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.dc936071.chunk.js.map